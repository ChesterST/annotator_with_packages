{"ast":null,"code":"import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, withCtx as _withCtx, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, withModifiers as _withModifiers, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_menu_bar = _resolveComponent(\"menu-bar\");\n  const _component_annotation_sidebar = _resolveComponent(\"annotation-sidebar\");\n  const _component_q_drawer = _resolveComponent(\"q-drawer\");\n  const _component_start_page = _resolveComponent(\"start-page\");\n  const _component_annotation_page = _resolveComponent(\"annotation-page\");\n  const _component_q_page_container = _resolveComponent(\"q-page-container\");\n  const _component_q_layout = _resolveComponent(\"q-layout\");\n  const _component_drag_n_drop_overlay = _resolveComponent(\"drag-n-drop-overlay\");\n  const _component_exit_dialog = _resolveComponent(\"exit-dialog\");\n  return _openBlock(), _createElementBlock(\"div\", {\n    class: \"fullscreen\",\n    onDragover: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.onDragEnter && $options.onDragEnter(...args), [\"prevent\"])),\n    onDragenter: _cache[4] || (_cache[4] = (...args) => $options.onDragEnter && $options.onDragEnter(...args)),\n    onDragleave: _cache[5] || (_cache[5] = _withModifiers((...args) => $options.onDragLeave && $options.onDragLeave(...args), [\"self\"])),\n    onDrop: _cache[6] || (_cache[6] = _withModifiers((...args) => $options.onDrop && $options.onDrop(...args), [\"stop\", \"prevent\"])),\n    style: {\n      \"overflow-y\": \"scroll\"\n    }\n  }, [_createElementVNode(\"div\", {\n    style: _normalizeStyle({\n      'pointer-events': $data.overlayActive ? 'none' : 'auto'\n    })\n  }, [_createVNode(_component_q_layout, {\n    view: \"hHh lpR fFf\"\n  }, {\n    default: _withCtx(() => [$data.currentPage !== 'start' ? (_openBlock(), _createBlock(_component_menu_bar, {\n      key: 0\n    })) : _createCommentVNode(\"v-if\", true), _createVNode(_component_q_drawer, {\n      \"model-value\": $data.currentPage !== 'start',\n      bordered: \"\",\n      class: \"bg-grey-2\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_annotation_sidebar)]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model-value\"]), _createVNode(_component_q_page_container, null, {\n      default: _withCtx(() => [$data.currentPage === 'start' ? (_openBlock(), _createBlock(_component_start_page, {\n        key: 0,\n        onFileLoaded: _cache[0] || (_cache[0] = $event => $options.switchToPage('annotate'))\n      })) : _createCommentVNode(\"v-if\", true), $data.currentPage === 'annotate' ? (_openBlock(), _createBlock(_component_annotation_page, {\n        key: 1\n      })) : _createCommentVNode(\"v-if\", true)]),\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }), _createVNode(_component_drag_n_drop_overlay, {\n    style: _normalizeStyle({\n      'visibility': $data.overlayActive && $data.pendingFileDrop == null ? 'visible' : 'hidden'\n    })\n  }, null, 8 /* PROPS */, [\"style\"]), _createVNode(_component_exit_dialog, {\n    show: $data.pendingFileDrop != null && $data.currentPage != 'start',\n    onHide: _cache[1] || (_cache[1] = $event => $data.pendingFileDrop = null),\n    onConfirm: _cache[2] || (_cache[2] = $event => $options.processFileDrop())\n  }, null, 8 /* PROPS */, [\"show\"])], 4 /* STYLE */)], 32 /* HYDRATE_EVENTS */);\n}","map":{"version":3,"names":["_createElementBlock","class","onDragover","_cache","_withModifiers","args","$options","onDragEnter","onDragenter","onDragleave","onDragLeave","onDrop","style","_createElementVNode","_normalizeStyle","$data","overlayActive","_createVNode","_component_q_layout","view","currentPage","_createBlock","_component_menu_bar","key","_component_q_drawer","bordered","_component_annotation_sidebar","_component_q_page_container","_component_start_page","onFileLoaded","$event","switchToPage","_component_annotation_page","_component_drag_n_drop_overlay","pendingFileDrop","_component_exit_dialog","show","onHide","onConfirm","processFileDrop"],"sources":["C:\\Users\\Filip\\GIT_PROJECTS\\annotator_with_packages\\src\\App.vue"],"sourcesContent":["<template>\r\n  <div\r\n    class=\"fullscreen\"\r\n    @dragover.prevent=\"onDragEnter\"\r\n    @dragenter=\"onDragEnter\"\r\n    @dragleave.self=\"onDragLeave\"\r\n    @drop.stop.prevent=\"onDrop\"\r\n    style=\"overflow-y:scroll;\"\r\n  >\r\n    <div :style=\"{'pointer-events': overlayActive ? 'none' : 'auto'}\">\r\n      <q-layout view=\"hHh lpR fFf\">\r\n        <menu-bar v-if=\"currentPage !== 'start'\" />\r\n\r\n        <q-drawer :model-value=\"currentPage !== 'start'\" bordered class=\"bg-grey-2\">\r\n          <annotation-sidebar />\r\n        </q-drawer>\r\n\r\n        <q-page-container>\r\n          <start-page\r\n            v-if=\"currentPage === 'start'\"\r\n            @file-loaded=\"switchToPage('annotate')\"\r\n          />\r\n          <annotation-page v-if=\"currentPage === 'annotate'\" />\r\n        </q-page-container>\r\n      </q-layout>\r\n      <drag-n-drop-overlay :style=\"{'visibility': overlayActive && pendingFileDrop == null ? 'visible' : 'hidden'}\"/>\r\n      <exit-dialog :show=\"pendingFileDrop != null && currentPage != 'start'\" @hide=\"pendingFileDrop = null\" @confirm=\"processFileDrop()\"/>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MenuBar from \"./components/menubar/MenuBar.vue\";\r\nimport StartPage from \"./components/StartPage.vue\";\r\nimport AnnotationPage from \"./components/AnnotationPage.vue\";\r\nimport AnnotationSidebar from \"./components/AnnotationSidebar.vue\";\r\nimport DragNDropOverlay from \"./components/DragNDropOverlay.vue\";\r\nimport ExitDialog from \"./components/ExitDialog.vue\";\r\nimport { mapState, mapMutations } from \"vuex\";\r\nimport { useQuasar } from \"quasar\";\r\n\r\nexport default {\r\n  name: \"LayoutDefault\",\r\n  setup() {\r\n    const $q = useQuasar();\r\n    return {\r\n      notify(icon, message, level) {\r\n        $q.notify({\r\n          icon,\r\n          message,\r\n          color: level,\r\n          position: \"top\",\r\n          timeout: 2000,\r\n          actions: [\r\n            {\r\n              label: \"Dismiss\",\r\n              color: \"white\",\r\n            },\r\n          ],\r\n        });\r\n      },\r\n    };\r\n  },\r\n  data() {\r\n    return {\r\n      currentPage: \"start\",\r\n      overlayActive: false,\r\n      pendingFileDrop: null,\r\n    };\r\n  },\r\n  components: {\r\n    MenuBar,\r\n    StartPage,\r\n    AnnotationPage,\r\n    AnnotationSidebar,\r\n    DragNDropOverlay,\r\n    ExitDialog\r\n  },\r\n  computed: {\r\n    ...mapState([\"annotations\", \"classes\"]),\r\n  },\r\n  methods: {\r\n    ...mapMutations([\"loadClasses\", \"loadAnnotations\", \"setInputSentences\", \"clearAllAnnotations\", \"resetIndex\"]),\r\n    switchToPage(page) {\r\n      this.currentPage = page;\r\n    },\r\n    onDragEnter() {\r\n      console.log(\"Here\");\r\n      this.overlayActive = true;\r\n    },\r\n    onDragLeave() {\r\n      this.overlayActive = false;\r\n    },\r\n    onDrop(event) {\r\n      console.log(event);\r\n      this.overlayActive = false;\r\n      this.pendingFileDrop = event.dataTransfer.files[0]\r\n      if (this.currentPage == \"start\")  this.processFileDrop();\r\n    },\r\n    processFileDrop() {\r\n      let reader = new FileReader();\r\n      reader.onload = (ev) => {\r\n        let file = ev.target.result;\r\n        try {\r\n          if (this.currentPage == \"start\")  throw new Error(\"Not a text file.\");\r\n          this.loadAnnotations(JSON.parse(file));\r\n          this.notify(\r\n            \"fa fa-check\",\r\n            `Annotations imported successfully`,\r\n            \"positive\"\r\n          );\r\n        } catch (e) {\r\n          try {\r\n            if (this.currentPage == \"start\")  throw new Error(\"Not a text file.\");\r\n            this.loadClasses(JSON.parse(file));\r\n            this.notify(\r\n              \"fa fa-check\",\r\n              `${this.classes.length} Tags imported successfully`,\r\n              \"positive\"\r\n            );\r\n          } catch (e) {\r\n            try {\r\n              this.setInputSentences(file);\r\n              this.clearAllAnnotations();\r\n              this.resetIndex();\r\n              this.switchToPage('annotate');\r\n            } catch (e) {\r\n              this.notify(\"fas fa-exclamation-circle\", \"Invalid file\", \"red-6\");\r\n            }\r\n          }\r\n        }\r\n      };\r\n      reader.readAsText(this.pendingFileDrop);\r\n      this.pendingFileDrop = null;\r\n    },\r\n  },\r\n};\r\n</script>\r\n"],"mappings":";;;;;;;;;;;uBACEA,mBAAA,CA2BM;IA1BJC,KAAK,EAAC,YAAY;IACjBC,UAAQ,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;IAC7BG,WAAS,EAAAL,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;IACtBI,WAAS,EAAAN,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAOC,QAAA,CAAAI,WAAA,IAAAJ,QAAA,CAAAI,WAAA,IAAAL,IAAA,CAAW;IAC3BM,MAAI,EAAAR,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAeC,QAAA,CAAAK,MAAA,IAAAL,QAAA,CAAAK,MAAA,IAAAN,IAAA,CAAM;IAC1BO,KAA0B,EAA1B;MAAA;IAAA;MAEAC,mBAAA,CAkBM;IAlBAD,KAAK,EAAAE,eAAA;MAAA,kBAAqBC,KAAA,CAAAC,aAAa;IAAA;MAC3CC,YAAA,CAcWC,mBAAA;IAdDC,IAAI,EAAC;EAAa;sBAC1B,MAA2C,CAA3BJ,KAAA,CAAAK,WAAW,gB,cAA3BC,YAAA,CAA2CC,mBAAA;MAAAC,GAAA;IAAA,M,mCAE3CN,YAAA,CAEWO,mBAAA;MAFA,aAAW,EAAET,KAAA,CAAAK,WAAW;MAAcK,QAAQ,EAAR,EAAQ;MAACxB,KAAK,EAAC;;wBAC9D,MAAsB,CAAtBgB,YAAA,CAAsBS,6BAAA,E;;wCAGxBT,YAAA,CAMmBU,2BAAA;wBALjB,MAGE,CAFMZ,KAAA,CAAAK,WAAW,gB,cADnBC,YAAA,CAGEO,qBAAA;;QADCC,YAAW,EAAA1B,MAAA,QAAAA,MAAA,MAAA2B,MAAA,IAAExB,QAAA,CAAAyB,YAAY;+CAELhB,KAAA,CAAAK,WAAW,mB,cAAlCC,YAAA,CAAqDW,0BAAA;QAAAT,GAAA;MAAA,M;;;;;MAGzDN,YAAA,CAA+GgB,8BAAA;IAAzFrB,KAAK,EAAAE,eAAA;MAAA,cAAiBC,KAAA,CAAAC,aAAa,IAAID,KAAA,CAAAmB,eAAe;IAAA;sCAC5EjB,YAAA,CAAoIkB,sBAAA;IAAtHC,IAAI,EAAErB,KAAA,CAAAmB,eAAe,YAAYnB,KAAA,CAAAK,WAAW;IAAciB,MAAI,EAAAlC,MAAA,QAAAA,MAAA,MAAA2B,MAAA,IAAEf,KAAA,CAAAmB,eAAe;IAAUI,SAAO,EAAAnC,MAAA,QAAAA,MAAA,MAAA2B,MAAA,IAAExB,QAAA,CAAAiC,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}