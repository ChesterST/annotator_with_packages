{"ast":null,"code":"import MenuBar from \"./components/menubar/MenuBar.vue\";\nimport StartPage from \"./components/StartPage.vue\";\nimport AnnotationPage from \"./components/AnnotationPage.vue\";\nimport AnnotationSidebar from \"./components/AnnotationSidebar.vue\";\nimport DragNDropOverlay from \"./components/DragNDropOverlay.vue\";\nimport ExitDialog from \"./components/ExitDialog.vue\";\nimport { mapState, mapMutations } from \"vuex\";\nimport useQuasar from 'quasar/src/composables/use-quasar.js';\n;\nexport default {\n  name: \"LayoutDefault\",\n  setup() {\n    const $q = useQuasar();\n    return {\n      notify(icon, message, level) {\n        $q.notify({\n          icon,\n          message,\n          color: level,\n          position: \"top\",\n          timeout: 2000,\n          actions: [{\n            label: \"Dismiss\",\n            color: \"white\"\n          }]\n        });\n      }\n    };\n  },\n  data() {\n    return {\n      currentPage: \"start\",\n      overlayActive: false,\n      pendingFileDrop: null\n    };\n  },\n  components: {\n    MenuBar,\n    StartPage,\n    AnnotationPage,\n    AnnotationSidebar,\n    DragNDropOverlay,\n    ExitDialog\n  },\n  computed: {\n    ...mapState([\"annotations\", \"classes\"])\n  },\n  methods: {\n    ...mapMutations([\"loadClasses\", \"loadAnnotations\", \"setInputSentences\", \"clearAllAnnotations\", \"resetIndex\"]),\n    switchToPage(page) {\n      this.currentPage = page;\n    },\n    onDragEnter() {\n      console.log(\"Here\");\n      this.overlayActive = true;\n    },\n    onDragLeave() {\n      this.overlayActive = false;\n    },\n    onDrop(event) {\n      console.log(event);\n      this.overlayActive = false;\n      this.pendingFileDrop = event.dataTransfer.files[0];\n      if (this.currentPage == \"start\") this.processFileDrop();\n    },\n    processFileDrop() {\n      let reader = new FileReader();\n      reader.onload = ev => {\n        let file = ev.target.result;\n        try {\n          if (this.currentPage == \"start\") throw new Error(\"Not a text file.\");\n          this.loadAnnotations(JSON.parse(file));\n          this.notify(\"fa fa-check\", `Annotations imported successfully`, \"positive\");\n        } catch (e) {\n          try {\n            if (this.currentPage == \"start\") throw new Error(\"Not a text file.\");\n            this.loadClasses(JSON.parse(file));\n            this.notify(\"fa fa-check\", `${this.classes.length} Tags imported successfully`, \"positive\");\n          } catch (e) {\n            try {\n              this.setInputSentences(file);\n              this.clearAllAnnotations();\n              this.resetIndex();\n              this.switchToPage('annotate');\n            } catch (e) {\n              this.notify(\"fas fa-exclamation-circle\", \"Invalid file\", \"red-6\");\n            }\n          }\n        }\n      };\n      reader.readAsText(this.pendingFileDrop);\n      this.pendingFileDrop = null;\n    }\n  }\n};","map":{"version":3,"names":["MenuBar","StartPage","AnnotationPage","AnnotationSidebar","DragNDropOverlay","ExitDialog","mapState","mapMutations","useQuasar","name","setup","$q","notify","icon","message","level","color","position","timeout","actions","label","data","currentPage","overlayActive","pendingFileDrop","components","computed","methods","switchToPage","page","onDragEnter","console","log","onDragLeave","onDrop","event","dataTransfer","files","processFileDrop","reader","FileReader","onload","ev","file","target","result","Error","loadAnnotations","JSON","parse","e","loadClasses","classes","length","setInputSentences","clearAllAnnotations","resetIndex","readAsText"],"sources":["C:\\Users\\Filip\\GIT_PROJECTS\\annotator_with_packages\\src\\App.vue"],"sourcesContent":["<template>\r\n  <div\r\n    class=\"fullscreen\"\r\n    @dragover.prevent=\"onDragEnter\"\r\n    @dragenter=\"onDragEnter\"\r\n    @dragleave.self=\"onDragLeave\"\r\n    @drop.stop.prevent=\"onDrop\"\r\n    style=\"overflow-y:scroll;\"\r\n  >\r\n    <div :style=\"{'pointer-events': overlayActive ? 'none' : 'auto'}\">\r\n      <q-layout view=\"hHh lpR fFf\">\r\n        <menu-bar v-if=\"currentPage !== 'start'\" />\r\n\r\n        <q-drawer :model-value=\"currentPage !== 'start'\" bordered class=\"bg-grey-2\">\r\n          <annotation-sidebar />\r\n        </q-drawer>\r\n\r\n        <q-page-container>\r\n          <start-page\r\n            v-if=\"currentPage === 'start'\"\r\n            @file-loaded=\"switchToPage('annotate')\"\r\n          />\r\n          <annotation-page v-if=\"currentPage === 'annotate'\" />\r\n        </q-page-container>\r\n      </q-layout>\r\n      <drag-n-drop-overlay :style=\"{'visibility': overlayActive && pendingFileDrop == null ? 'visible' : 'hidden'}\"/>\r\n      <exit-dialog :show=\"pendingFileDrop != null && currentPage != 'start'\" @hide=\"pendingFileDrop = null\" @confirm=\"processFileDrop()\"/>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MenuBar from \"./components/menubar/MenuBar.vue\";\r\nimport StartPage from \"./components/StartPage.vue\";\r\nimport AnnotationPage from \"./components/AnnotationPage.vue\";\r\nimport AnnotationSidebar from \"./components/AnnotationSidebar.vue\";\r\nimport DragNDropOverlay from \"./components/DragNDropOverlay.vue\";\r\nimport ExitDialog from \"./components/ExitDialog.vue\";\r\nimport { mapState, mapMutations } from \"vuex\";\r\nimport { useQuasar } from \"quasar\";\r\n\r\nexport default {\r\n  name: \"LayoutDefault\",\r\n  setup() {\r\n    const $q = useQuasar();\r\n    return {\r\n      notify(icon, message, level) {\r\n        $q.notify({\r\n          icon,\r\n          message,\r\n          color: level,\r\n          position: \"top\",\r\n          timeout: 2000,\r\n          actions: [\r\n            {\r\n              label: \"Dismiss\",\r\n              color: \"white\",\r\n            },\r\n          ],\r\n        });\r\n      },\r\n    };\r\n  },\r\n  data() {\r\n    return {\r\n      currentPage: \"start\",\r\n      overlayActive: false,\r\n      pendingFileDrop: null,\r\n    };\r\n  },\r\n  components: {\r\n    MenuBar,\r\n    StartPage,\r\n    AnnotationPage,\r\n    AnnotationSidebar,\r\n    DragNDropOverlay,\r\n    ExitDialog\r\n  },\r\n  computed: {\r\n    ...mapState([\"annotations\", \"classes\"]),\r\n  },\r\n  methods: {\r\n    ...mapMutations([\"loadClasses\", \"loadAnnotations\", \"setInputSentences\", \"clearAllAnnotations\", \"resetIndex\"]),\r\n    switchToPage(page) {\r\n      this.currentPage = page;\r\n    },\r\n    onDragEnter() {\r\n      console.log(\"Here\");\r\n      this.overlayActive = true;\r\n    },\r\n    onDragLeave() {\r\n      this.overlayActive = false;\r\n    },\r\n    onDrop(event) {\r\n      console.log(event);\r\n      this.overlayActive = false;\r\n      this.pendingFileDrop = event.dataTransfer.files[0]\r\n      if (this.currentPage == \"start\")  this.processFileDrop();\r\n    },\r\n    processFileDrop() {\r\n      let reader = new FileReader();\r\n      reader.onload = (ev) => {\r\n        let file = ev.target.result;\r\n        try {\r\n          if (this.currentPage == \"start\")  throw new Error(\"Not a text file.\");\r\n          this.loadAnnotations(JSON.parse(file));\r\n          this.notify(\r\n            \"fa fa-check\",\r\n            `Annotations imported successfully`,\r\n            \"positive\"\r\n          );\r\n        } catch (e) {\r\n          try {\r\n            if (this.currentPage == \"start\")  throw new Error(\"Not a text file.\");\r\n            this.loadClasses(JSON.parse(file));\r\n            this.notify(\r\n              \"fa fa-check\",\r\n              `${this.classes.length} Tags imported successfully`,\r\n              \"positive\"\r\n            );\r\n          } catch (e) {\r\n            try {\r\n              this.setInputSentences(file);\r\n              this.clearAllAnnotations();\r\n              this.resetIndex();\r\n              this.switchToPage('annotate');\r\n            } catch (e) {\r\n              this.notify(\"fas fa-exclamation-circle\", \"Invalid file\", \"red-6\");\r\n            }\r\n          }\r\n        }\r\n      };\r\n      reader.readAsText(this.pendingFileDrop);\r\n      this.pendingFileDrop = null;\r\n    },\r\n  },\r\n};\r\n</script>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}